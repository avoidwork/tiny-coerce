{"version":3,"file":"tiny-coerce.min.js","sources":["../src/regex.js","../src/constants.js","../src/coerce.js"],"sourcesContent":["export const regex = {\r\n\tfalse: /^(F|f)alse$/,\r\n\tnull: /^(N|n)ull$/,\r\n\tjson: /^[\"\\[{].*[}\\]\"]$/,\r\n\ttrue: /^(T|t)rue$/\r\n};\r\n","export const STRING = \"string\";\r\nexport const UNDEFINED = \"undefined\";\r\n","import {regex} from \"./regex.js\";\r\nimport {STRING, UNDEFINED} from \"./constants.js\";\r\n\r\nfunction walk (arg) {\r\n\tconst array = Array.isArray(arg),\r\n\t\tx = array ? arg : Object.keys(arg),\r\n\t\tfn = (i, idx) => {\r\n\t\t\targ[array ? idx : i] = coerce(array ? i : arg[i], true); // eslint-disable-line no-use-before-define\r\n\t\t};\r\n\r\n\tx.forEach(fn);\r\n}\r\n\r\nexport function coerce (arg, deep = false) {\r\n\tlet result;\r\n\r\n\tif (typeof arg !== STRING) {\r\n\t\tresult = arg;\r\n\r\n\t\tif (deep) {\r\n\t\t\twalk(result);\r\n\t\t}\r\n\t} else {\r\n\t\tconst value = arg.trim();\r\n\t\tlet tmp;\r\n\r\n\t\tif (value.length === 0) {\r\n\t\t\tresult = value;\r\n\t\t} else if (regex.true.test(value)) {\r\n\t\t\tresult = true;\r\n\t\t} else if (regex.false.test(value)) {\r\n\t\t\tresult = false;\r\n\t\t} else if (regex.null.test(value)) {\r\n\t\t\tresult = null;\r\n\t\t} else if (value === UNDEFINED) {\r\n\t\t\tresult = undefined;\r\n\t\t} else if (!isNaN(tmp = Number(value))) {\r\n\t\t\tresult = tmp;\r\n\t\t} else if (regex.json.test(value)) {\r\n\t\t\tlet valid;\r\n\r\n\t\t\ttry {\r\n\t\t\t\tresult = JSON.parse(value);\r\n\t\t\t\tvalid = true;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tresult = value;\r\n\t\t\t\tvalid = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (valid && deep) {\r\n\t\t\t\twalk(result);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tresult = value;\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n"],"names":["regex","false","null","json","true","STRING","UNDEFINED","walk","arg","array","Array","isArray","Object","keys","forEach","i","idx","coerce","deep","result","value","trim","tmp","length","test","undefined","isNaN","Number","valid","JSON","parse","e"],"mappings":";;;;AAAO,MAAMA,EAAQ,CACpBC,MAAO,cACPC,KAAM,aACNC,KAAM,mBACNC,KAAM,cCJMC,EAAS,SACTC,EAAY,YCEzB,SAASC,EAAMC,GACd,MAAMC,EAAQC,MAAMC,QAAQH,IACvBC,EAAQD,EAAMI,OAAOC,KAAKL,IAK7BM,SAJI,CAACC,EAAGC,KACRR,EAAIC,EAAQO,EAAMD,GAAKE,EAAOR,EAAQM,EAAIP,EAAIO,IAAI,EAAK,GAI1D,CAEO,SAASE,EAAQT,EAAKU,GAAO,GACnC,IAAIC,EAEJ,UAAWX,IAAQH,EAClBc,EAASX,EAELU,GACHX,EAAKY,OAEA,CACN,MAAMC,EAAQZ,EAAIa,OAClB,IAAIC,EAEJ,GAAqB,IAAjBF,EAAMG,OACTJ,EAASC,OACH,GAAIpB,EAAMI,KAAKoB,KAAKJ,GAC1BD,GAAS,OACH,GAAInB,EAAMC,MAAMuB,KAAKJ,GAC3BD,GAAS,OACH,GAAInB,EAAME,KAAKsB,KAAKJ,GAC1BD,EAAS,UACH,GAAIC,IAAUd,EACpBa,OAASM,OACH,GAAKC,MAAMJ,EAAMK,OAAOP,IAExB,GAAIpB,EAAMG,KAAKqB,KAAKJ,GAAQ,CAClC,IAAIQ,EAEJ,IACCT,EAASU,KAAKC,MAAMV,GACpBQ,GAAQ,CACR,CAAC,MAAOG,GACRZ,EAASC,EACTQ,GAAQ,CACR,CAEGA,GAASV,GACZX,EAAKY,EAET,MACGA,EAASC,OAhBTD,EAASG,CAkBV,CAED,OAAOH,CACR,QAAAF"}