{"version":3,"file":"tiny-coerce.esm.min.js","sources":["../src/regex.js","../src/coerce.js"],"sourcesContent":["export const regex = {\n\tfalse: /^(F|f)alse$/,\n\tnull: /^(N|n)ull$/,\n\tjson: /^[\"\\[{].*[}\\]\"]$/,\n\ttrue: /^(T|t)rue$/\n};\n","import {regex} from \"./regex.js\";\n\nfunction walk (arg) {\n\tconst array = Array.isArray(arg),\n\t\tx = array ? arg : Object.keys(arg),\n\t\tfn = (i, idx) => {\n\t\t\targ[array ? i : idx] = coerce(array ? i : arg[i], true); // eslint-disable-line no-use-before-define\n\t\t};\n\n\tx.forEach(fn);\n}\n\nexport function coerce (arg, deep = false) {\n\tlet result;\n\n\tif (typeof arg !== \"string\") {\n\t\tresult = arg;\n\n\t\tif (deep) {\n\t\t\twalk(result);\n\t\t}\n\t} else {\n\t\tconst value = arg.trim();\n\t\tlet tmp;\n\n\t\tif (value.length === 0) {\n\t\t\tresult = value;\n\t\t} else if (regex.true.test(value)) {\n\t\t\tresult = true;\n\t\t} else if (regex.false.test(value)) {\n\t\t\tresult = false;\n\t\t} else if (regex.null.test(value)) {\n\t\t\tresult = null;\n\t\t} else if (value === \"undefined\") {\n\t\t\tresult = undefined;\n\t\t} else if (!isNaN(tmp = Number(value))) {\n\t\t\tresult = tmp;\n\t\t} else if (regex.json.test(value)) {\n\t\t\tlet valid;\n\n\t\t\ttry {\n\t\t\t\tresult = JSON.parse(value);\n\t\t\t\tvalid = true;\n\t\t\t} catch (e) {\n\t\t\t\tresult = value;\n\t\t\t\tvalid = false;\n\t\t\t}\n\n\t\t\tif (valid && deep) {\n\t\t\t\twalk(result);\n\t\t\t}\n\t\t} else {\n\t\t\tresult = value;\n\t\t}\n\t}\n\n\treturn result;\n}\n"],"names":["regex","false","null","json","true","walk","arg","array","Array","isArray","Object","keys","forEach","i","idx","coerce","deep","result","value","trim","tmp","length","test","undefined","isNaN","Number","valid","JSON","parse","e"],"mappings":";;;;AAAO,MAAMA,EAAQ,CACpBC,MAAO,cACPC,KAAM,aACNC,KAAM,mBACNC,KAAM,cCFP,SAASC,EAAMC,GACd,MAAMC,EAAQC,MAAMC,QAAQH,IACvBC,EAAQD,EAAMI,OAAOC,KAAKL,IAK7BM,SAJI,CAACC,EAAGC,KACRR,EAAIC,EAAQM,EAAIC,GAAOC,EAAOR,EAAQM,EAAIP,EAAIO,IAAI,EAAK,GAI1D,CAEO,SAASE,EAAQT,EAAKU,GAAO,GACnC,IAAIC,EAEJ,GAAmB,iBAARX,EACVW,EAASX,EAELU,GACHX,EAAKY,OAEA,CACN,MAAMC,EAAQZ,EAAIa,OAClB,IAAIC,EAEJ,GAAqB,IAAjBF,EAAMG,OACTJ,EAASC,OACH,GAAIlB,EAAMI,KAAKkB,KAAKJ,GAC1BD,GAAS,OACH,GAAIjB,EAAMC,MAAMqB,KAAKJ,GAC3BD,GAAS,OACH,GAAIjB,EAAME,KAAKoB,KAAKJ,GAC1BD,EAAS,UACH,GAAc,cAAVC,EACVD,OAASM,OACH,GAAKC,MAAMJ,EAAMK,OAAOP,IAExB,GAAIlB,EAAMG,KAAKmB,KAAKJ,GAAQ,CAClC,IAAIQ,EAEJ,IACCT,EAASU,KAAKC,MAAMV,GACpBQ,GAAQ,CAIR,CAHC,MAAOG,GACRZ,EAASC,EACTQ,GAAQ,CACR,CAEGA,GAASV,GACZX,EAAKY,EAET,MACGA,EAASC,OAhBTD,EAASG,CAkBV,CAED,OAAOH,CACR,QAAAF"}