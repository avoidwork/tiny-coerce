{"version":3,"sources":["tiny-coerce.js"],"names":["global","regex","false","null","json","true","coerce","walk","arg","Array","isArray","forEach","i","idx","Object","keys","key","deep","result","value","trim","tmp","length","test","isNaN","valid","JSON","parse","e","version","exports","define","amd","module","window"],"mappings":"AAQC,UAAUA,CAAV,CAAkB,CAClB,KAAMC,GAAQ,CACbC,MAAO,aADM,CAEbC,KAAM,YAFO,CAGbC,KAAM,kBAHO,CAIbC,KAAM,YAJO,CAAd,CAOA,GAAIC,EAAJ,CAAYC,CAAZ,CAEAA,EAAOC,GAAO,CACTC,MAAMC,OAAN,CAAcF,CAAd,CADS,CAEZA,EAAMA,EAAIG,OAAJ,CAAY,CAACC,CAAD,CAAIC,CAAJ,GAAY,CAC7BL,EAAIK,CAAJ,EAAWP,EAAOM,CAAP,IACX,CAFK,CAFM,CAKFJ,YAAeM,OALb,EAMZA,OAAOC,IAAP,CAAYP,CAAZ,EAAiBG,OAAjB,CAAyBK,GAAO,CAC/BR,EAAIQ,CAAJ,EAAWV,EAAOE,EAAIQ,CAAJ,CAAP,IACX,CAFD,CAID,CApBiB,CAsBlBV,EAAS,CAACE,CAAD,CAAMS,IAAN,GAAuB,CAC/B,GAAIC,EAAJ,CAEA,GAAmB,QAAf,QAAOV,EAAX,CACCU,EAASV,CADV,CAGKS,CAHL,EAIEV,EAAKW,CAAL,CAJF,KAMO,CACN,KAAMC,GAAQX,EAAIY,IAAJ,EAAd,CACA,GAAIC,EAAJ,CAEA,GAAqB,CAAjB,KAAMC,MAAV,CACCJ,EAASC,CADV,KAEO,IAAIlB,EAAMI,IAAN,CAAWkB,IAAX,CAAgBJ,CAAhB,CAAJ,CACND,IADM,KAEA,IAAIjB,EAAMC,KAAN,CAAYqB,IAAZ,CAAiBJ,CAAjB,CAAJ,CACND,IADM,KAEA,IAAIjB,EAAME,IAAN,CAAWoB,IAAX,CAAgBJ,CAAhB,CAAJ,CACND,EAAS,IADH,KAEA,IAAc,WAAV,IAAJ,CACNA,QADM,KAEA,IAAI,CAACM,MAAMH,GAAaF,CAAnB,CAAL,CACND,EAASG,CADH,KAEA,IAAIpB,EAAMG,IAAN,CAAWmB,IAAX,CAAgBJ,CAAhB,CAAJ,CAA4B,CAClC,GAAIM,EAAJ,CAEA,GAAI,CACHP,EAASQ,KAAKC,KAAL,CAAWR,CAAX,CADN,CAEHM,IACA,CAAC,MAAOG,CAAP,CAAU,CACXV,EAASC,CADE,CAEXM,IACA,CAEGA,GAASR,CAXqB,EAYjCV,EAAKW,CAAL,CAED,CAdM,IAeNA,GAASC,CAEV,CAED,MAAOD,EACP,CAnEiB,CAqElBZ,EAAOuB,OAAP,CAAiB,OArEC,CAwEK,WAAnB,QAAOC,QAxEO,CA0EW,UAAlB,QAAOC,OAAP,EAA+C,IAAK,EAApB,UAAOC,GA1EhC,CA2EjBD,OAAO,IAAMzB,CAAb,CA3EiB,CA6EjBN,EAAOM,MAAP,CAAgBA,CA7EC,CAyEjB2B,OAAOH,OAAP,CAAiBxB,CAMlB,CA/EA,EA+EmB,WAAlB,QAAO4B,OAAP,CAAyClC,MAAzC,CAAgCkC,MA/EjC,C","file":"unknown","sourcesContent":["/**\r\n * Tiny coercion library for Client or Server\r\n *\r\n * @author Jason Mulligan <jason.mulligan@avoidwork.com>\r\n * @copyright 2018\r\n * @license BSD-3-Clause\r\n * @version 1.1.0\r\n */\r\n(function (global) {\r\n\tconst regex = {\r\n\t\tfalse: /^(F|f)alse$/,\r\n\t\tnull: /^(N|n)ull$/,\r\n\t\tjson: /^[\"\\[{].*[\\]}\"]$/,\r\n\t\ttrue: /^(t|T)rue$/\r\n\t};\r\n\r\n\tlet coerce, walk;\r\n\r\n\twalk = arg => {\r\n\t\tif (Array.isArray(arg)) {\r\n\t\t\targ = arg.forEach((i, idx) => {\r\n\t\t\t\targ[idx] = coerce(i, true);\r\n\t\t\t});\r\n\t\t} else if (arg instanceof Object) {\r\n\t\t\tObject.keys(arg).forEach(key => {\r\n\t\t\t\targ[key] = coerce(arg[key], true);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tcoerce = (arg, deep = false) => {\r\n\t\tlet result;\r\n\r\n\t\tif (typeof arg !== \"string\") {\r\n\t\t\tresult = arg;\r\n\r\n\t\t\tif (deep) {\r\n\t\t\t\twalk(result);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst value = arg.trim();\r\n\t\t\tlet tmp;\r\n\r\n\t\t\tif (value.length === 0) {\r\n\t\t\t\tresult = value;\r\n\t\t\t} else if (regex.true.test(value)) {\r\n\t\t\t\tresult = true;\r\n\t\t\t} else if (regex.false.test(value)) {\r\n\t\t\t\tresult = false;\r\n\t\t\t} else if (regex.null.test(value)) {\r\n\t\t\t\tresult = null;\r\n\t\t\t} else if (value === \"undefined\") {\r\n\t\t\t\tresult = undefined;\r\n\t\t\t} else if (!isNaN(tmp = Number(value))) {\r\n\t\t\t\tresult = tmp;\r\n\t\t\t} else if (regex.json.test(value)) {\r\n\t\t\t\tlet valid;\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tresult = JSON.parse(value);\r\n\t\t\t\t\tvalid = true;\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tresult = value;\r\n\t\t\t\t\tvalid = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (valid && deep) {\r\n\t\t\t\t\twalk(result);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresult = value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tcoerce.version = \"1.1.0\";\r\n\r\n\t// Node, AMD & window supported\r\n\tif (typeof exports !== \"undefined\") {\r\n\t\tmodule.exports = coerce;\r\n\t} else if (typeof define === \"function\" && define.amd !== void 0) {\r\n\t\tdefine(() => coerce);\r\n\t} else {\r\n\t\tglobal.coerce = coerce;\r\n\t}\r\n}(typeof window !== \"undefined\" ? window : global));\r\n"]}